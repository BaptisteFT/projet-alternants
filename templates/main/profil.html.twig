<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel = "stylesheet" href = "../css/simple.css"/>
    <title>Projet Alternant</title>
</head>
<body>
{% block body %}
<header>
  <h1>Profil</h1>
    <nav>
        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('create_user') }}"> Ajouter un utilisateur</a>
            <a href="{{ path('admin_panel') }}"> Administration de l'application</a>
            <a href="{{ path('excel_parse') }}"> Ajout des étudiants automatique</a>

        {% endif %}
        <a href="{{ path('app_index_index') }}"> Index</a>
        <a href="{{ path('app_logout') }}"> Déconnexion</a>
    </nav>
</header>
<main>
    <h2>Informations de l'utilisateur</h2>

    <ul>
        <li>Nom :  {{ user.lastName }}</li>
        <li>Prénom :  {{ user.firstName }}</li>
        <li>Email :  {{ user.email }}</li>
    </ul>

    {% if is_granted('ROLE_STUDENT') %}
        {% if token is not null %}
            <h2>lien de connexion actif :</h2>
            <p>Url : {{ token.generateUrl }}</p> <br>
            <p>Date d'expiration :  {{ token.expireDate|date("m/d/Y h:m") }}</p> <br>
            <p>vous pouvez regénérer un lien en appuyant sur le button ci-dessous</p>
            <a href="{{ path('create_token', {userId: user.id}) }}"> Générer un lien de connexion</a>
        {% else %}
            <p>Aucun lien n'est actuellement générer, vous pouvez en générer en appuyant sur le button ci-dessous</p>
            <a href="{{ path('create_token', {userId: user.id}) }}"> Générer un lien de connexion</a>
        {% endif %}
    {% endif %}
</main>
{% endblock %}
</body>
</html>